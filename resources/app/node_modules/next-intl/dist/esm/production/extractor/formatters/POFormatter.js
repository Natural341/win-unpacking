import{setNestedProperty as t}from"../utils/ObjectUtils.js";import e from"../utils/POParser.js";import s from"./Formatter.js";import{getSortedMessages as a}from"./utils.js";class r extends s{static DEFAULT_METADATA={"Content-Type":"text/plain; charset=utf-8","Content-Transfer-Encoding":"8bit","X-Generator":"next-intl","X-Crowdin-SourceKey":"msgstr"};EXTENSION=".po";metadataByLocale=(()=>new Map)();parse(t,s){const a=e.parse(t);return a.meta&&this.metadataByLocale.set(s.locale,a.meta),a.messages||[]}serialize(t,s){const o={Language:s.locale,...r.DEFAULT_METADATA,...this.metadataByLocale.get(s.locale)};return e.serialize({meta:o,messages:a(t)})}toJSONString(e,s){const a=this.parse(e,s),r={};for(const e of a)t(r,e.id,e.message);return JSON.stringify(r,null,2)}}export{r as default};
