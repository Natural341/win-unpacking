import a from"./catalog/CatalogManager.js";class i{isDevelopment=!1;constructor(i,e={}){this.manager=new a(i,e),this.isDevelopment=e.isDevelopment??!1,this.initialScanPromise=this.performInitialScan()}async compile(a,i){this.initialScanPromise&&(await this.initialScanPromise,this.initialScanPromise=void 0);const e=await this.manager.extractFileMessages(a,i);return this.isDevelopment&&e.changed&&this.manager.save(),e.source}async performInitialScan(){await this.manager.loadMessages(),await this.manager.save()}async extract(){await this.initialScanPromise}[Symbol.dispose](){this.manager.destroy()}}export{i as default};
