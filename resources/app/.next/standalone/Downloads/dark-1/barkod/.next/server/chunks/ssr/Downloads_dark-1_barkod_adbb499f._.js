module.exports=[4610,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});a.s(["ArrowLeftIcon",0,c],4610)},47280,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});a.s(["CurrencyDollarIcon",0,c],47280)},81260,2686,66452,a=>{"use strict";let b=Symbol.for("constructDateFrom");function c(a,c){return"function"==typeof a?a(c):a&&"object"==typeof a&&b in a?a[b](c):a instanceof Date?new a.constructor(c):new Date(c)}function d(a,b){return c(b||a,a)}a.s(["constructFromSymbol",0,b,"millisecondsInDay",0,864e5,"millisecondsInWeek",0,6048e5],2686),a.s(["constructFrom",()=>c],66452),a.s(["toDate",()=>d],81260)},40789,a=>{"use strict";var b=a.i(66452),c=a.i(81260);function d(a,d,e){var f;let g;return f=-d,g=(0,c.toDate)(a,e?.in),isNaN(f)?(0,b.constructFrom)(e?.in||a,NaN):(f&&g.setDate(g.getDate()+f),g)}a.s(["subDays",()=>d],40789)},78862,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))});a.s(["StarIcon",0,c],78862)},57794,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))});a.s(["UserGroupIcon",0,c],57794)},19307,a=>{"use strict";var b=a.i(19598),c=a.i(73151),d=a.i(95548),e=a.i(40789),f=a.i(35645),g=a.i(4610),h=a.i(57794),i=a.i(78862);let j=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});var k=a.i(47280);function l(){let a=(0,d.useRouter)(),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)((0,f.format)((0,e.subDays)(new Date,30),"yyyy-MM-dd")),[r,s]=(0,c.useState)((0,f.format)(new Date,"yyyy-MM-dd"));(0,c.useEffect)(()=>{t()},[p,r]);let t=async()=>{m(!0);try{let a=new Date(p),b=new Date(r);b.setHours(23,59,59,999);let c=await fetch(`/api/reports?type=customer&startDate=${a.toISOString()}&endDate=${b.toISOString()}`);if(c.ok){let a=await c.json();o(a)}}catch(a){console.error("Error fetching customer report:",a)}finally{m(!1)}};if(l)return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-black"})});if(!n||!n.summary)return(0,b.jsx)("div",{className:"text-center py-20",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Rapor yÃ¼klenemedi"})});let{summary:u,topCustomers:v,customerGrowth:w}=n,x={totalCustomers:u?.totalCustomers||0,newCustomers:u?.newCustomers||0,activeCustomers:u?.activeCustomers||0,totalSpent:u?.totalSpent||0,averageSpent:u?.averageSpent||0};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>a.push("/tr/reports"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(g.ArrowLeftIcon,{className:"h-6 w-6 text-gray-700"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-950 tracking-tight",children:"DetaylÄ± MÃ¼ÅŸteri Raporu"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-2 font-medium",children:[(0,f.format)(new Date(p),"dd/MM/yyyy")," - ",(0,f.format)(new Date(r),"dd/MM/yyyy")]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("input",{type:"date",value:p,onChange:a=>q(a.target.value),className:"rounded-lg border-gray-300 focus:border-black focus:ring-black py-2 px-3 border font-medium"}),(0,b.jsx)("input",{type:"date",value:r,onChange:a=>s(a.target.value),className:"rounded-lg border-gray-300 focus:border-black focus:ring-black py-2 px-3 border font-medium"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-black to-gray-800 text-white rounded-xl p-6 shadow-lg",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsx)(h.UserGroupIcon,{className:"h-8 w-8"})}),(0,b.jsx)("p",{className:"text-sm opacity-90 font-semibold mb-1",children:"Toplam MÃ¼ÅŸteri"}),(0,b.jsx)("p",{className:"text-4xl font-bold",children:x.totalCustomers}),(0,b.jsxs)("p",{className:"text-xs opacity-75 mt-2",children:[x.newCustomers," yeni mÃ¼ÅŸteri"]})]}),(0,b.jsxs)("div",{className:"bg-white border-2 border-black rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsx)(i.StarIcon,{className:"h-8 w-8 text-black"})}),(0,b.jsx)("p",{className:"text-sm text-gray-700 font-semibold mb-1",children:"Aktif MÃ¼ÅŸteri"}),(0,b.jsx)("p",{className:"text-4xl font-bold text-black",children:x.activeCustomers}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"DÃ¶nem iÃ§inde alÄ±ÅŸveriÅŸ yaptÄ±"})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsx)(k.CurrencyDollarIcon,{className:"h-8 w-8 text-gray-700"})}),(0,b.jsx)("p",{className:"text-sm text-gray-700 font-semibold mb-1",children:"Toplam Harcama"}),(0,b.jsxs)("p",{className:"text-4xl font-bold text-gray-950",children:["â‚º",x.totalSpent.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"bg-gray-100 rounded-xl p-6 shadow-sm border border-gray-200",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsx)(j,{className:"h-8 w-8 text-gray-700"})}),(0,b.jsx)("p",{className:"text-sm text-gray-700 font-semibold mb-1",children:"Ortalama Harcama"}),(0,b.jsxs)("p",{className:"text-4xl font-bold text-gray-950",children:["â‚º",x.averageSpent.toFixed(2)]}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"MÃ¼ÅŸteri baÅŸÄ±na"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm mb-8",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-950 mb-4",children:"â­ En DeÄŸerli MÃ¼ÅŸteriler"}),(0,b.jsx)("div",{className:"space-y-3",children:v&&v.length>0?v.slice(0,10).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gray-50 to-white border border-gray-200 rounded-lg hover:shadow-md transition-all",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-black text-white font-bold text-lg flex-shrink-0",children:c+1}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-950 truncate",children:a.customer.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.customer.phone}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Son alÄ±ÅŸveriÅŸ: ",(0,f.format)(new Date(a.lastPurchase),"dd/MM/yyyy")]})]}),(0,b.jsxs)("div",{className:"text-center flex-shrink-0 px-4 border-l border-gray-200",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"AlÄ±ÅŸveriÅŸ"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-950",children:a.totalPurchases})]}),(0,b.jsxs)("div",{className:"text-right flex-shrink-0 min-w-[120px]",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Toplam Harcama"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-black",children:["â‚º",a.totalSpent.toFixed(2)]})]})]},c)):(0,b.jsx)("p",{className:"text-center text-gray-500 py-8",children:"HenÃ¼z mÃ¼ÅŸteri verisi yok"})})]}),w&&w.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-950 mb-4",children:"ðŸ“Š MÃ¼ÅŸteri BÃ¼yÃ¼me Trendi"}),(0,b.jsx)("div",{className:"space-y-2",children:w.slice(-7).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 w-24",children:(0,f.format)(new Date(a.date),"dd MMM")}),(0,b.jsxs)("div",{className:"flex-1 bg-gray-100 rounded-full h-10 overflow-hidden relative",children:[(0,b.jsx)("div",{className:"bg-gray-300 h-full absolute",style:{width:`${a.totalCustomers/Math.max(...w.map(a=>a.totalCustomers))*100}%`,minWidth:a.totalCustomers>0?"60px":"0"}}),(0,b.jsx)("div",{className:"bg-black h-full flex items-center justify-end pr-3 text-white text-sm font-bold transition-all absolute",style:{width:`${a.newCustomers/Math.max(...w.map(a=>a.totalCustomers))*100}%`,minWidth:a.newCustomers>0?"50px":"0"},children:a.newCustomers>0&&`+${a.newCustomers}`})]}),(0,b.jsxs)("div",{className:"text-right w-24",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:a.totalCustomers}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Toplam"})]})]},c))}),(0,b.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 flex items-center justify-center gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded bg-black"}),(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Yeni MÃ¼ÅŸteriler"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded bg-gray-300"}),(0,b.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Toplam MÃ¼ÅŸteriler"})]})]})]})]})}a.s(["default",()=>l],19307)}];

//# sourceMappingURL=Downloads_dark-1_barkod_adbb499f._.js.map