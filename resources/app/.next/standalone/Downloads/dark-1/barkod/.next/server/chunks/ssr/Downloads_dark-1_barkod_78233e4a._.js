module.exports=[9900,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});a.s(["XMarkIcon",0,c],9900)},28101,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))});a.s(["MagnifyingGlassIcon",0,c],28101)},58369,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});a.s(["PlusIcon",0,c],58369)},81767,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});a.s(["TrashIcon",0,c],81767)},12598,a=>{"use strict";var b=a.i(73151);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))});a.s(["ExclamationTriangleIcon",0,c],12598)},59758,a=>{"use strict";var b=a.i(19598),c=a.i(12598),d=a.i(9900);function e({isOpen:a,title:e,message:f,confirmText:g="Onayla",cancelText:h="İptal",onConfirm:i,onCancel:j,type:k="danger"}){if(!a)return null;let l={danger:{icon:"text-red-600",bg:"bg-red-50",border:"border-red-200",button:"bg-red-600 hover:bg-red-700"},warning:{icon:"text-yellow-600",bg:"bg-yellow-50",border:"border-yellow-200",button:"bg-yellow-600 hover:bg-yellow-700"},info:{icon:"text-blue-600",bg:"bg-blue-50",border:"border-blue-200",button:"bg-blue-600 hover:bg-blue-700"}}[k];return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full overflow-hidden",style:{maxWidth:"28rem",minWidth:"320px"},children:[(0,b.jsx)("div",{className:`${l.bg} ${l.border} border-b-2 px-6 py-4`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`${l.icon} bg-white rounded-full p-2`,children:(0,b.jsx)(c.ExclamationTriangleIcon,{className:"h-6 w-6"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e})]}),(0,b.jsx)("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-white/50",children:(0,b.jsx)(d.XMarkIcon,{className:"h-5 w-5"})})]})}),(0,b.jsx)("div",{className:"px-6 py-6",children:(0,b.jsx)("p",{className:"text-gray-700 text-base leading-relaxed",children:f})}),(0,b.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex gap-3 justify-end",children:[(0,b.jsx)("button",{onClick:j,className:"px-6 py-2.5 border-2 border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-100 transition-all",children:h}),(0,b.jsx)("button",{onClick:i,className:`px-6 py-2.5 ${l.button} text-white rounded-lg font-semibold transition-all shadow-md`,children:g})]})]})})}a.s(["default",()=>e])},88239,a=>{"use strict";var b=a.i(19598),c=a.i(73151),d=a.i(17665),e=a.i(58369),f=a.i(28101),g=a.i(81767),h=a.i(9900),i=a.i(59758);function j(){let a=(0,d.useTranslations)("common"),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)({isOpen:!1,purchaseId:null,purchaseNumber:""}),[z,A]=(0,c.useState)({supplierId:"",invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],discount:0,notes:""}),[B,C]=(0,c.useState)([{productId:"",quantity:1,unitPrice:0,discount:0,totalPrice:0}]);(0,c.useEffect)(()=>{D(),E(),F()},[r]);let D=async()=>{try{let a=r?`/api/purchases?search=${encodeURIComponent(r)}`:"/api/purchases",b=await fetch(a);if(!b.ok)throw Error("Failed to fetch");let c=await b.json();k(c.purchases||c)}catch(a){console.error("Error fetching purchases:",a)}finally{q(!1)}},E=async()=>{try{let a=await fetch("/api/suppliers");if(!a.ok)throw Error("Failed to fetch");let b=await a.json();m(b.suppliers||b)}catch(a){console.error("Error fetching suppliers:",a)}},F=async()=>{try{let a=await fetch("/api/products");if(!a.ok)throw Error("Failed to fetch");let b=await a.json();o(b.products||b)}catch(a){console.error("Error fetching products:",a)}},G=(a,b,c)=>{let d,e=[...B];if(e[a]={...e[a],[b]:c},"productId"===b){let b=n.find(a=>a.id===c);b&&(e[a].productName=b.name,e[a].unitPrice=b.costPrice)}e[a].totalPrice=(d=e[a].quantity,d*e[a].unitPrice-e[a].discount),C(e)},H=()=>{let a=B.reduce((a,b)=>a+b.totalPrice,0),b=.18*a,c=a+b-z.discount;return{totalAmount:a,tax:b,finalAmount:c}},I=async a=>{a.preventDefault();let b=B.filter(a=>a.productId&&a.quantity>0);if(0===b.length)return void alert("Lütfen en az bir ürün ekleyin");try{let{totalAmount:a,tax:c,finalAmount:d}=H(),e={...z,totalAmount:a,tax:c,finalAmount:d,items:b},f=v?`/api/purchases/${v.id}`:"/api/purchases",g=v?"PUT":"POST",h=await fetch(f,{method:g,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!h.ok){let a=await h.json();alert(a.error||"İşlem başarısız");return}u(!1),w(null),K(),D()}catch(a){console.error("Error saving purchase:",a),alert("Hata oluştu")}},J=async()=>{if(x.purchaseId)try{let a=await fetch(`/api/purchases/${x.purchaseId}`,{method:"DELETE"});if(!a.ok){let b=await a.json();alert(b.error||"Silme başarısız");return}D()}catch(a){console.error("Error deleting purchase:",a)}finally{y({isOpen:!1,purchaseId:null,purchaseNumber:""})}},K=()=>{A({supplierId:"",invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],discount:0,notes:""}),C([{productId:"",quantity:1,unitPrice:0,discount:0,totalPrice:0}])},{totalAmount:L,tax:M,finalAmount:N}=H();return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-950 tracking-tight",children:"Alış Yönetimi"}),(0,b.jsxs)("button",{onClick:()=>{u(!0),w(null),K()},className:"inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-lg hover:bg-gray-800 font-semibold shadow-sm hover:shadow-md transition-all duration-150 tracking-tight mt-4 sm:mt-0",children:[(0,b.jsx)(e.PlusIcon,{className:"h-5 w-5"}),"Yeni Alış"]})]}),(0,b.jsx)("div",{className:"mb-7",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:(0,b.jsx)(f.MagnifyingGlassIcon,{className:"h-5 w-5 text-gray-400"})}),(0,b.jsx)("input",{type:"text",placeholder:"Alış ara...",value:r,onChange:a=>s(a.target.value),className:"block w-full rounded-lg border-gray-300 pl-12 focus:border-gray-900 focus:ring-gray-900 py-3 px-4 border shadow-sm font-medium tracking-tight"})]})}),(0,b.jsx)("div",{className:"bg-white shadow-sm rounded-xl overflow-hidden border border-gray-100",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Alış No"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Tedarikçi"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Fatura No"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Tarih"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Toplam"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Ödeme Durumu"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wide",children:a("actions")})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:p?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-6 text-center font-semibold text-gray-600 tracking-tight",children:a("loading")})}):0===j.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-6 text-center text-gray-500 font-medium tracking-tight",children:"Alış bulunamadı"})}):j.map(a=>{var c,d;let e;return(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-100",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-950 tracking-tight",children:a.purchaseNumber}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-950 tracking-tight",children:a.supplier?.name||"-"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700",children:a.invoiceNumber||"-"}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-700",children:a.invoiceDate?new Date(a.invoiceDate).toLocaleDateString("tr-TR"):"-"}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-950 tracking-tight",children:["₺",a.finalAmount.toFixed(2)]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${(c=a.paymentStatus,(e={pending:"bg-yellow-100 text-yellow-800",partial:"bg-orange-100 text-orange-800",paid:"bg-green-100 text-green-800"})[c]||e.pending)}`,children:{pending:"Bekliyor",partial:"Kısmi",paid:"Ödendi"}[d=a.paymentStatus]||d})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,b.jsx)("button",{onClick:()=>y({isOpen:!0,purchaseId:a.id,purchaseNumber:a.purchaseNumber}),className:"text-gray-600 hover:text-gray-900 transition-colors duration-150",children:(0,b.jsx)(g.TrashIcon,{className:"h-5 w-5 inline"})})})]},a.id)})})]})}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-950 tracking-tight",children:v?"Alış Düzenle":"Yeni Alış"})}),(0,b.jsxs)("form",{onSubmit:I,className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Tedarikçi *"}),(0,b.jsxs)("select",{required:!0,value:z.supplierId,onChange:a=>A({...z,supplierId:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium",children:[(0,b.jsx)("option",{value:"",children:"Seçiniz"}),l.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Fatura No"}),(0,b.jsx)("input",{type:"text",value:z.invoiceNumber,onChange:a=>A({...z,invoiceNumber:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Fatura Tarihi"}),(0,b.jsx)("input",{type:"date",value:z.invoiceDate,onChange:a=>A({...z,invoiceDate:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]})]}),(0,b.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700",children:"Ürünler"}),(0,b.jsx)("button",{type:"button",onClick:()=>{C([...B,{productId:"",quantity:1,unitPrice:0,discount:0,totalPrice:0}])},className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-semibold",children:"+ Ürün Ekle"})]}),(0,b.jsx)("div",{className:"space-y-2",children:B.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-end",children:[(0,b.jsx)("div",{className:"col-span-4",children:(0,b.jsxs)("select",{value:a.productId,onChange:a=>G(c,"productId",a.target.value),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium text-sm",children:[(0,b.jsx)("option",{value:"",children:"Ürün Seçin"}),n.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("input",{type:"number",placeholder:"Adet",value:a.quantity,onChange:a=>G(c,"quantity",parseFloat(a.target.value)||0),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium text-sm"})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("input",{type:"number",step:"0.01",placeholder:"Fiyat",value:a.unitPrice,onChange:a=>G(c,"unitPrice",parseFloat(a.target.value)||0),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium text-sm"})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("input",{type:"number",step:"0.01",placeholder:"İndirim",value:a.discount,onChange:a=>G(c,"discount",parseFloat(a.target.value)||0),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium text-sm"})}),(0,b.jsxs)("div",{className:"col-span-1 text-sm font-bold text-gray-950",children:["₺",a.totalPrice.toFixed(2)]}),(0,b.jsx)("div",{className:"col-span-1 flex justify-end",children:B.length>1&&(0,b.jsx)("button",{type:"button",onClick:()=>{B.length>1&&C(B.filter((a,b)=>b!==c))},className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)(h.XMarkIcon,{className:"h-5 w-5"})})})]},c))})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,b.jsxs)("div",{className:"space-y-2 max-w-md ml-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:"Ara Toplam:"}),(0,b.jsxs)("span",{className:"font-bold text-gray-950",children:["₺",L.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:"KDV (18%):"}),(0,b.jsxs)("span",{className:"font-bold text-gray-950",children:["₺",M.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:"İndirim:"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:z.discount,onChange:a=>A({...z,discount:parseFloat(a.target.value)||0}),className:"w-32 rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-1 px-2 border font-medium text-sm text-right"})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg border-t pt-2",children:[(0,b.jsx)("span",{className:"font-bold text-gray-950",children:"Genel Toplam:"}),(0,b.jsxs)("span",{className:"font-bold text-gray-950",children:["₺",N.toFixed(2)]})]})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Notlar"}),(0,b.jsx)("textarea",{value:z.notes,onChange:a=>A({...z,notes:a.target.value}),rows:2,className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-gray-800 font-semibold",children:v?"Güncelle":"Kaydet"}),(0,b.jsx)("button",{type:"button",onClick:()=>{u(!1),w(null),K()},className:"flex-1 px-4 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold",children:"İptal"})]})]})]})}),(0,b.jsx)(i.default,{isOpen:x.isOpen,title:"Alışı Sil",message:`"${x.purchaseNumber}" alışını silmek istediğinizden emin misiniz?`,confirmText:"Evet, Sil",cancelText:"İptal",onConfirm:J,onCancel:()=>y({isOpen:!1,purchaseId:null,purchaseNumber:""}),type:"danger"})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=Downloads_dark-1_barkod_78233e4a._.js.map