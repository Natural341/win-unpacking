module.exports=[21339,a=>{"use strict";var b=a.i(19598),c=a.i(73151),d=a.i(17665),e=a.i(58369),f=a.i(28101),g=a.i(29787),h=a.i(81767),i=a.i(32652),j=a.i(95635);let k=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});var l=a.i(59758);function m(){let a=(0,d.useTranslations)("common"),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)({isOpen:!1,customerId:null,customerName:""}),[A,B]=(0,c.useState)({code:"",name:"",phone:"",email:"",address:"",taxNumber:"",taxOffice:"",customerType:"retail",creditLimit:0,discount:0});(0,c.useEffect)(()=>{C()},[q]);let C=async()=>{try{let a=q?`/api/customers?search=${encodeURIComponent(q)}`:"/api/customers",b=await fetch(a);if(!b.ok)throw Error("Failed to fetch");let c=await b.json();n(c.data||[])}catch(a){console.error("Error fetching customers:",a),n([])}finally{p(!1)}},D=async a=>{a.preventDefault();try{let a=u?`/api/customers/${u.id}`:"/api/customers",b=u?"PUT":"POST",c=await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(A)});if(!c.ok){let a=await c.json();alert(a.error||"İşlem başarısız");return}t(!1),v(null),F(),C()}catch(a){console.error("Error saving customer:",a),alert("Hata oluştu")}},E=async()=>{if(y.customerId)try{let a=await fetch(`/api/customers/${y.customerId}`,{method:"DELETE"});if(!a.ok){let b=await a.json();alert(b.error||"Silme başarısız");return}C()}catch(a){console.error("Error deleting customer:",a)}finally{z({isOpen:!1,customerId:null,customerName:""})}},F=()=>{B({code:"",name:"",phone:"",email:"",address:"",taxNumber:"",taxOffice:"",customerType:"retail",creditLimit:0,discount:0})};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-950 tracking-tight",children:"Müşteri Yönetimi"}),(0,b.jsxs)("button",{onClick:()=>{t(!0),v(null),F()},className:"inline-flex items-center gap-2 px-5 py-2.5 bg-black text-white rounded-lg hover:bg-gray-800 font-semibold shadow-sm hover:shadow-md transition-all duration-150 tracking-tight mt-4 sm:mt-0",children:[(0,b.jsx)(e.PlusIcon,{className:"h-5 w-5"}),"Yeni Müşteri"]})]}),(0,b.jsx)("div",{className:"mb-7",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:(0,b.jsx)(f.MagnifyingGlassIcon,{className:"h-5 w-5 text-gray-400"})}),(0,b.jsx)("input",{type:"text",placeholder:"Müşteri ara...",value:q,onChange:a=>r(a.target.value),className:"block w-full rounded-lg border-gray-300 pl-12 focus:border-gray-900 focus:ring-gray-900 py-3 px-4 border shadow-sm font-medium tracking-tight"})]})}),(0,b.jsx)("div",{className:"bg-white shadow-sm rounded-xl overflow-hidden border border-gray-100",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Kod"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Ad Soyad"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"İletişim"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Tip"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Bakiye"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Sadakat Puanı"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wide",children:a("actions")})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:o?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-6 text-center font-semibold text-gray-600 tracking-tight",children:a("loading")})}):0===m.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-6 text-center text-gray-500 font-medium tracking-tight",children:"Müşteri bulunamadı"})}):m.map(a=>{var c;let d;return(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-100",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-950 tracking-tight",children:a.code}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-950 tracking-tight",children:a.name}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-600 font-medium",children:[a.phone&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.PhoneIcon,{className:"h-4 w-4"}),a.phone]}),a.email&&(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,b.jsx)(j.EnvelopeIcon,{className:"h-4 w-4"}),a.email]})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${(c=a.customerType,(d={retail:"bg-blue-100 text-blue-800",wholesale:"bg-purple-100 text-purple-800",vip:"bg-yellow-100 text-yellow-800"})[c]||d.retail)}`,children:"retail"===a.customerType?"Perakende":"wholesale"===a.customerType?"Toptan":"VIP"})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-950 tracking-tight",children:["₺",a.currentBalance.toFixed(2)]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-950 tracking-tight",children:[a.loyaltyPoints," puan"]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,b.jsx)("button",{onClick:()=>x(a),className:"text-gray-700 hover:text-black mr-4 transition-colors duration-150",title:"Detayları Görüntüle",children:(0,b.jsx)(k,{className:"h-5 w-5 inline"})}),(0,b.jsx)("button",{onClick:()=>{v(a),B({code:a.code,name:a.name,phone:a.phone||"",email:a.email||"",address:a.address||"",taxNumber:a.taxNumber||"",taxOffice:a.taxOffice||"",customerType:a.customerType,creditLimit:a.creditLimit,discount:a.discount}),t(!0)},className:"text-gray-700 hover:text-black mr-4 transition-colors duration-150",children:(0,b.jsx)(g.PencilIcon,{className:"h-5 w-5 inline"})}),(0,b.jsx)("button",{onClick:()=>z({isOpen:!0,customerId:a.id,customerName:a.name}),className:"text-gray-600 hover:text-gray-900 transition-colors duration-150",children:(0,b.jsx)(h.TrashIcon,{className:"h-5 w-5 inline"})})]})]},a.id)})})]})}),s&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-950 tracking-tight",children:u?"Müşteri Düzenle":"Yeni Müşteri"})}),(0,b.jsxs)("form",{onSubmit:D,className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Müşteri Kodu *"}),(0,b.jsx)("input",{type:"text",required:!0,value:A.code,onChange:a=>B({...A,code:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Ad Soyad *"}),(0,b.jsx)("input",{type:"text",required:!0,value:A.name,onChange:a=>B({...A,name:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Telefon"}),(0,b.jsx)("input",{type:"text",value:A.phone,onChange:a=>B({...A,phone:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Email"}),(0,b.jsx)("input",{type:"email",value:A.email,onChange:a=>B({...A,email:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Adres"}),(0,b.jsx)("textarea",{value:A.address,onChange:a=>B({...A,address:a.target.value}),rows:2,className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Müşteri Tipi"}),(0,b.jsxs)("select",{value:A.customerType,onChange:a=>B({...A,customerType:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium",children:[(0,b.jsx)("option",{value:"retail",children:"Perakende"}),(0,b.jsx)("option",{value:"wholesale",children:"Toptan"}),(0,b.jsx)("option",{value:"vip",children:"VIP"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Kredi Limiti (₺)"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:A.creditLimit,onChange:a=>B({...A,creditLimit:parseFloat(a.target.value)||0}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"İndirim (%)"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:A.discount,onChange:a=>B({...A,discount:parseFloat(a.target.value)||0}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Vergi No"}),(0,b.jsx)("input",{type:"text",value:A.taxNumber,onChange:a=>B({...A,taxNumber:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Vergi Dairesi"}),(0,b.jsx)("input",{type:"text",value:A.taxOffice,onChange:a=>B({...A,taxOffice:a.target.value}),className:"w-full rounded-lg border-gray-300 focus:border-gray-900 focus:ring-gray-900 py-2 px-3 border font-medium"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-black text-white rounded-lg hover:bg-gray-800 font-semibold",children:u?"Güncelle":"Kaydet"}),(0,b.jsx)("button",{type:"button",onClick:()=>{t(!1),v(null),F()},className:"flex-1 px-4 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold",children:"İptal"})]})]})]})}),w&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-950 tracking-tight",children:"Müşteri Detayları"}),(0,b.jsx)("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("span",{className:"text-2xl",children:"×"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Müşteri Kodu"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-950 mt-1",children:w.code})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Müşteri Adı"}),(0,b.jsx)("p",{className:"text-base font-semibold text-gray-950 mt-1",children:w.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Telefon"}),(0,b.jsx)("p",{className:"text-base font-medium text-gray-950 mt-1",children:w.phone||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"E-posta"}),(0,b.jsx)("p",{className:"text-base font-medium text-gray-950 mt-1",children:w.email||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Müşteri Tipi"}),(0,b.jsx)("p",{className:"text-base font-medium text-gray-950 mt-1",children:"retail"===w.customerType?"Perakende":"wholesale"===w.customerType?"Toptan":"VIP"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Sadakat Puanı"}),(0,b.jsxs)("p",{className:"text-base font-semibold text-gray-950 mt-1",children:[w.loyaltyPoints," puan"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Cari Bakiye"}),(0,b.jsxs)("p",{className:"text-base font-bold text-gray-950 mt-1",children:["₺",w.currentBalance.toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Kredi Limiti"}),(0,b.jsxs)("p",{className:"text-base font-semibold text-gray-950 mt-1",children:["₺",w.creditLimit.toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"İskonto Oranı"}),(0,b.jsxs)("p",{className:"text-base font-semibold text-gray-950 mt-1",children:["%",w.discount]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Vergi No"}),(0,b.jsx)("p",{className:"text-base font-medium text-gray-950 mt-1",children:w.taxNumber||"-"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("p",{className:"text-sm font-bold text-gray-700",children:"Adres"}),(0,b.jsx)("p",{className:"text-base font-medium text-gray-950 mt-1",children:w.address||"-"})]})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,b.jsx)("button",{onClick:()=>x(null),className:"w-full px-4 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold",children:"Kapat"})})]})]})}),(0,b.jsx)(l.default,{isOpen:y.isOpen,title:"Müşteriyi Sil",message:`"${y.customerName}" m\xfcşterisini silmek istediğinizden emin misiniz?`,confirmText:"Evet, Sil",cancelText:"İptal",onConfirm:E,onCancel:()=>z({isOpen:!1,customerId:null,customerName:""}),type:"danger"})]})}a.s(["default",()=>m],21339)}];

//# sourceMappingURL=Downloads_dark-1_barkod_app_%5Blocale%5D_%28dashboard%29_customers_page_tsx_072f744b._.js.map